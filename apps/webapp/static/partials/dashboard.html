<div class="row mt">
    <div class="col-md-7 col-lg-5">
        <calendar filter-user="navUser.id != currentUser.id ? navUser : null" filter-taskforce="navTaskforce"></calendar>
        <div class="mt">
            <task-list filter-user="currentUser" ng-if="navUser.id == currentUser.id"></task-list>
        </div>
    </div>

    <div class="col-md-5 col-lg-4">
        <task-list filter-user="navUser.id != currentUser.id ? navUser : null" filter-taskforce="navTaskforce"></task-list>
    </div>

    <div class="col-md-12 col-lg-3 ds">
        <div ng-controller="NotificationsController">
            <h3>Notifications</h3>
            <spinner ng-show="loading" />
            <div ng-hide="loading">
                <div class="desc" ng-repeat="nt in notifications" ng-class="{ 'fade': !nt.unread }">
                    <div class="thumb">
                        <span class="badge bg-theme"><span class="fa fa-clock-o"></span></span>
                    </div>
                    <div class="details">
                        <p>
                            <span class="text-muted"><time-from-now time="nt.timestamp" /></span><br>
                            <span notification-text="nt" />
                        </p>
                        <p>
                            <a href ng-click="markRead(nt)" ng-if="nt.unread">Mark as read</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div ng-controller="TeamMembersListCtrl">
            <h3>Team Members</h3>
            <div class="desc" ng-repeat="user in users | filter:userFilter | orderBy:['-is_online', 'last_name']">
                <div class="thumb">
                    <img class="img-circle" height="40" user-picture="user" size="small">
                </div>
                <div class="details">
                    <p>
                        <a ui-sref="users.detail({ userId: user.id })">{{ user.full_name }}</a><br/>
                        <span class="text-success" ng-if="user.is_online">
                            <span class="fa fa-circle"></span>
                            Online
                        </span>
                        <span class="text-muted" ng-if="!user.is_online">
                            <span class="fa fa-circle-o"></span>
                            Offline
                        </span>
                    </p>
                </div>
            </div>
            <a href ng-click="more()" ng-if="!showAll">More...</a>
            <a href ng-click="less()" ng-if="showAll">Less...</a>
        </div>
    </div>
</div>
